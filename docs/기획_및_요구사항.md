좋습니다. '배달 중개 플랫폼' 시나리오를 멀티 모듈로 구현하기 위한 구체적인 기획안과 요구사항을 정리해 드릴게요.이 기획은 2명이 2주 안에 **전략 패턴**과 **어댑터 패턴**을 명확하게 구현하고 API로 테스트하는 데 초점을 맞춥니다.1. 프로젝트 개요

- **프로젝트명:** `RapidRoute` (가제: 배달 중개 매칭 서비스)
- **핵심 목표:** 레스토랑(클라이언트)으로부터 '배달 요청'을 받으면, 등록된 여러 배달 대행사(A사, B사)의 API를 '어댑터'로 호출하여 견적(비용, 시간)을 받고, 설정된 '전략'에 따라 최적의 대행사를 선정하여 '배차 요청'을 보낸다.
- **핵심 패턴:**
    1. **전략 패턴 (Strategy Pattern):** '최적 대행사 선정' 알고리즘 (예: 최저가, 최단 시간)을 동적으로 교체.
    2. **어댑터 패턴 (Adapter Pattern):** A사, B사의 각기 다른 API 스펙을 '공통 인터페이스'로 통일.

2. 핵심 요구사항 (RFP)

- **R-1 (견적 요청):**
- 플랫폼은 '신규 주문'이 접수되면, 연동된 **모든** 배달 대행사(A, B)에게 예상 견적(배달비, 소요 시간)을 요청해야 한다.
- (제약) A사와 B사는 API 요청/응답 형식이 **완전히 다르다.**
- **R-2 (견적 비교):**
- 플랫폼은 A, B사로부터 받은 각기 다른 형식의 견적을 '표준화된 견적 객체'(예: `AgencyQuote`)로 변환하여 리스트로 취합해야 한다.
- **R-3 (전략 기반 선정):**
- 플랫폼은 ***현재 설정된 '운영 전략'**에 따라, 취합된 견적 리스트(`List<AgencyQuote>`) 중에서 최적의 대행사 1곳을 선정해야 한다.
- 선정 전략은 다음과 같으며, 추후 확장이 가능해야 한다.
- `Strategy 1`: **최저가 전략 (LowestFeeStrategy)** - `estimatedFee`가 가장 낮은 대행사 선정.
- `Strategy 2`: **최단 시간 전략 (FastestTimeStrategy)** - `estimatedTime`이 가장 짧은 대행사 선정.
- **R-4 (배차 요청):**
- 플랫폼은 R-3에서 선정된 대행사에게 '최종 배차 요청'(dispatch)을 보내고, 그 결과를 반환해야 한다.
- **R-5 (전략 변경 API - *Optional*):**
- 운영자가 현재 시스템의 '선정 전략'을 API를 통해 동적으로 변경할 수 있다. (예: `POST /system/strategy?name=LowestFee`)

3. 멀티 모듈 아키텍처 (제안)말씀하신 대로, 이 프로젝트는 명확하게 모듈을 분리하기 좋습니다.

```
rapid-route/
├── build.gradle (Root)
├── settings.gradle
|
├── route-api           (1. API 계층: 외부 요청/응답)
│   └── src/main/java/.../api/
│       └── DispatchController.java  (POST /dispatch)
│       └── SystemController.java    (POST /system/strategy) - (Optional)
│
├── route-core          (2. 핵심 비즈니스 로직)
│   └── src/main/java/.../core/
│       ├── DispatchService.java     (*** Context ***)
│       └── strategy/
│           ├── DeliveryMatchingStrategy.java  (*** Strategy Interface ***)
│           ├── LowestFeeStrategy.java       (*** Concrete Strategy 1 ***)
│           └── FastestTimeStrategy.java     (*** Concrete Strategy 2 ***)
│
├── route-domain        (3. 도메인 모델)
│   └── src/main/java/.../domain/
│       ├── Order.java               (주문 정보)
│       └── AgencyQuote.java         (표준화된 견적)
│
└── route-infra-client  (4. 외부 연동: 어댑터 계층)
    └── src/main/java/.../client/
        ├── DeliveryAgencyClient.java    (*** Adapter Target Interface ***)
        ├── MockAgencyAAdapter.java      (*** Adapter 1 ***)
        └── MockAgencyBAdapter.java      (*** Adapter 2 ***)

```

모듈 간 의존성

- `route-api` → `route-core`
- `route-core` → `route-domain`, `route-infra-client`
- `route-infra-client` → `route-domain`
- `route-domain`: (의존성 없음)

4. 2인 2주 개발 계획 (역할 분담)담당자 A: API & Context (핵심 흐름)

- **담당 모듈:** `route-api`, `route-core` (일부), `route-domain`, `build.gradle` (초기 설정)
- **Week 1 (구조 및 API):**
- 전체 멀티 모듈 프로젝트 구조(`build.gradle`) 설정.
- `route-domain` 모듈: `Order`, `AgencyQuote` 클래스 정의.
- `route-api` 모듈: `DispatchController` (`POST /dispatch`) 엔드포인트 정의. (Request DTO 포함)
- `route-core` 모듈: `DispatchService`(**Context**) 뼈대 구현. (B가 만들 인터페이스를 `DI` 받도록)
- **Week 2 (로직 통합):**
- `DispatchService` 로직 완성:
1. (B가 만든) `DeliveryAgencyClient` 구현체 2개(`List`)를 모두 호출.
2. (B가 만든) `DeliveryMatchingStrategy` 구현체(`@Primary` 또는 `Map<String, Strategy>`)를 주입받음.
3. 전략을 실행(`strategy.findBest(...)`)하여 최적 업체 선정.
4. 최종 배차 요청 및 결과 반환.
- Postman/Swagger를 이용한 통합 테스트.

담당자 B: Strategy & Adapter (알고리즘 및 연동)

- **담당 모듈:** `route-infra-client`, `route-core` (일부)
- **Week 1 (어댑터 구현):**
- `route-infra-client` 모듈:
- **`DeliveryAgencyClient` (Target)** 인터페이스 정의: `AgencyQuote getQuote(Order order)`
- **`MockAgencyAAdapter` (Adapter)** 구현:
- (가상) A사는 `distance`만 km로 받음.
- (가상) 응답: `{"cost": 5000, "time_min": 15}` (JSON)
- > 이를 `AgencyQuote` 객체로 변환(Adapt)하여 반환.
- **`MockAgencyBAdapter` (Adapter)** 구현:
- (가상) B사는 `address`와 `amount`를 받음.
- (가상) 응답: `<response><fee>4500</fee><duration>20</duration></response>` (XML)
- > 이를 `AgencyQuote` 객체로 변환(Adapt)하여 반환.
- **Week 2 (전략 구현 및 테스트):**
- `route-core` 모듈의 `strategy` 패키지:
- **`DeliveryMatchingStrategy` (Strategy)** 인터페이스 정의: `AgencyQuote findBest(List<AgencyQuote> quotes)`
- **`LowestFeeStrategy` (Concrete Strategy)** 구현.
- **`FastestTimeStrategy` (Concrete Strategy)** 구현.
- **(중요)** `Strategy`와 `Adapter`에 대한 **단위 테스트(Unit Test)** 작성. (JUnit)